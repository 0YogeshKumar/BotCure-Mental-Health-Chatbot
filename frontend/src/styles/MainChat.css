/* --- Welcome Screen --- */
.welcome-screen {
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    height: 100%; text-align: center; color: var(--text-secondary-dark);
}
body.light .welcome-screen { color: var(--text-secondary-light); }
.welcome-logo { width: 200px; height: 200px; margin-bottom: 1rem; }
.welcome-screen h1 { font-size: 2.5rem; margin: 0; color: var(--text-primary-dark); }
body.light .welcome-screen h1 { color: var(--text-primary-light); }

/* --- Main Chat Layout --- */
.main-chat-container { display: flex; flex-direction: column; height: 100%; overflow: hidden; }
.chat-window { flex-grow: 1; overflow-y: auto; padding: 1.5rem; }
.chat-message { display: flex; margin-bottom: 1.5rem; max-width: 75%; }
.chat-message.user { justify-content: flex-end; margin-left: auto; }
.chat-message.model { justify-content: flex-start; margin-right: auto; }

.message-bubble {
    padding: 0.8rem 1.2rem; border-radius: 18px; position: relative;
    box-shadow: var(--shadow-dark); line-height: 1.6;
}
body.light .message-bubble { box-shadow: var(--shadow-light); }
.chat-message.user .message-bubble {
    background-color: var(--primary-color-dark); color: #fff;
    border-bottom-right-radius: 4px;
}
body.light .chat-message.user .message-bubble { background-color: var(--primary-color-light); }
.chat-message.model .message-bubble {
    background-color: var(--panel-bg-dark); border: 1px solid var(--border-dark);
    border-bottom-left-radius: 4px;
}
body.light .chat-message.model .message-bubble { background-color: var(--panel-bg-light); border: 1px solid var(--border-light); }


/* --- Markdown & Crisis Styling --- */
.markdown-content ul { padding-left: 20px; margin: 0.5rem 0; }
.markdown-content li { margin-bottom: 0.25rem; }
.markdown-content strong { font-weight: 600; color: var(--primary-color-dark); }
body.light .markdown-content strong { color: var(--primary-color-light); }
.markdown-content br { content: ""; display: block; margin-bottom: 0.5em; }

.markdown-content.crisis {
    background-color: #ffcdd2; color: #c62828; border: 2px solid #ef5350;
    padding: 1rem; border-radius: 8px;
}
.markdown-content.crisis strong { color: #b71c1c; font-size: 1.1em; }

.loading-bubble { display: flex; gap: 5px; align-items: center; padding: 1rem 1.2rem; }
.loading-bubble span { width: 8px; height: 8px; background-color: #888; border-radius: 50%; animation: bounce 1.4s infinite ease-in-out both; }
.loading-bubble span:nth-child(1) { animation-delay: -0.32s; }
.loading-bubble span:nth-child(2) { animation-delay: -0.16s; }
@keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }

/* --- Input Area --- */
.chat-input-area {
    padding: 1rem 1.5rem; border-top: 1px solid var(--border-dark); display: flex; align-items: center; gap: 0.75rem;
}
body.light .chat-input-area { border-top: 1px solid var(--border-light); }
.chat-input-area textarea {
    flex-grow: 1; padding: 0.8rem 1rem; border-radius: 8px; border: 1px solid var(--border-dark);
    background-color: transparent; color: inherit; font-family: inherit; font-size: 1rem; resize: none;
}
body.light .chat-input-area textarea { border: 1px solid var(--border-light); }
.chat-input-area button {
    background: none; border: none; color: var(--text-secondary-dark); cursor: pointer;
    font-size: 1.5rem; padding: 0.5rem; display: flex; align-items: center; justify-content: center;
}
body.light .chat-input-area button { color: var(--text-secondary-light); }
.send-btn { color: var(--primary-color-dark) !important; }
body.light .send-btn { color: var(--primary-color-light) !important; }
.send-btn:disabled { color: #555 !important; cursor: not-allowed; }
.mic-btn.listening { color: #dc3545; }

.speak-btn {
    background: none; border: none; cursor: pointer; color: var(--text-secondary-dark);
    margin-left: 0.5rem; font-size: 1rem; vertical-align: middle;
}
.chat-message.user .speak-btn { color: #eee; }
.error-message { text-align: center; color: #dc3545; }

